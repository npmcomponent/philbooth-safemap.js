(function(e){"use strict";function t(e){function s(){return f(k).length+(m.isSet?1:0)}function c(e){return i(e)?m.isSet:r.call(k,e)}function a(e,t){return i(e)?m.value:c(e)?k[e]:t}function l(e,t){i(e)?(m.isSet=!0,m.value=t):k[e]=t}function h(e){i(e)?(m.isSet=!1,delete m.value):delete k[e]}function v(){k={},h("__proto__")}function d(e){if("function"!=typeof e)throw Error("Invalid Argument. function(key, value) is required, actual:"+e);m.isSet&&e("__proto__",m.value);for(var t in k)r.call(k,t)&&e(t,k[t])}function p(e){return y(e)&&o(u.noValue,e),a(e)}function y(e){return c(e)===!1}function _(e,t){c(e)&&o(u.keyExists,e),l(e,t)}function S(e){y(e)&&o(u.noValue,e),h(e)}var m,k;return this instanceof t==!1?new t(e):(m={isSet:!1},k={},"object"==typeof e&&null!==e&&n(k,e),this.size=s,this.has=c,this.get=a,this.set=l,this.remove=h,this.clear=v,this.forEach=d,this.safeGet=p,this.safeSet=_,this.safeRemove=S,void 0)}function n(e,t){var n;for(n in t)r.call(t,n)&&(e[n]=t[n])}function i(e){return"__proto__"===e}function o(e,t){throw Error(e+" for key `"+t+"`")}var r=Object.prototype.hasOwnProperty,u={noValue:"No value",keyExists:"Key exists"},f=Object.keys||function(e){var t,n=0;for(t in e)r.call(e,t)&&(n+=1);return n};"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&null!==module?module.exports=t:e.SafeMap=t})(this);